<%- include('../partials/header') %>
<div class= bike-pic>
<h2><%= trailName %> Trail Details</h2>
<div class="trail-details">
  <h1><%= trail.name %> Trail</h1>
  <table class="table">
<div class = "trail-details">
  <table>
  <tr>
    <td><strong>Difficulty:</strong> <%= trail.difficulty %></td>
  </tr>
  <tr>
    <td><strong>Mileage:</strong> <%= trail.mileage %> miles</td>
  </tr>
  <tr>
    <td><strong>Rating:</strong> <%= trail.rating %></td>
  </tr>
  <tr>
    <td><strong>Style:</strong> <%= trail.trailStyle %></td>
  </tr>
  <tr>
    <td><strong>Description:</strong> <%= trail.description %></td>
  </tr>
</table>
</div>



<% if (user) { %>
<form class="update-form" action="/trails/bike/<%= trail._id %>/show" method="POST">
  <label>Update
    <input type="text" name="update" col="6" row="10">
  </label>
  <label>Date You Rode the Trail
    <input type="date" name="dateAdded">
  </label>
  <div class="button-container">
      <button type="submit" value="Update Trail">Add Trail Update</button>
    </div>
</form>
<% } %>

<table class = 'bike-pic'>
    <tr>
      <th>User</th>
      <th>Update</th>
      <th>Date</th>
      <th>Trail Update Out of Date? Go Ahead and Edit it</th>
      <th>Not Worth Editing? Go Ahead and Delete it</th>
    
    </tr>

      <% trail.update.forEach(function(update){ %>
      <tr>
        <td class="review-user"><img alt="avatar" src="<%= update.userAvatar %>" referrerpolicy="no-referrer" ><%= update.userName %></td>
        <td><%= update.update %></td>
        <td><%= update.dateAdded.toDateString() %></td>
        <td>
          <% if (user?._id.equals(update.user)) { %>
            <form action= "/trails/bike/<%= trail._id %>/<%= update._id %>/editbike%>" method="GET">            <button type="submit">Edit Trail</button>
            </form>
              <% } %>
        </td>
         <td>
          <% if (user?._id.equals(update.user)) { %>
            <form action="/trails/bike/<%= trail._id %>?_method=DELETE" method="POST">
              <input type="hidden" name="updateId" value="<%= update._id %>">
              <button type="submit">X</button>
            </form>            
          <% } %>
        </td>
      </tr>
      <% }); %>
    
</table>
</div>
<%- include('../partials/footer') %>
